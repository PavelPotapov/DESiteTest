(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&c(o)}).observe(document,{childList:!0,subtree:!0});function v(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?a.credentials="include":e.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function c(e){if(e.ep)return;e.ep=!0;const a=v(e);fetch(e.href,a)}})();const g=document.querySelector(".burger"),q=document.querySelector(".sidebar-menu");g.addEventListener("click",()=>{g.classList.toggle("active"),q.classList.toggle("active")});function E(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}function h(t){return t.trim()!==""}async function x(t){let s=await fetch(t.url,{method:t.method,headers:{"Content-Type":"application/json"},mode:"no-cors"});return s=s.json(),console.log(s,typeof s),s}function b(){r.classList.remove("validate-active"),f.classList.remove("validate-active"),p.classList.remove("validate-active"),d.value="",u.value="",m.value=""}function T(){L.classList.remove("modal__active"),b()}function N(){L.classList.add("modal__active")}const L=document.querySelector(".modal"),l=document.querySelector(".form-submit"),O=document.querySelector(".modal__cross"),_=document.querySelector(".footer__btn"),d=document.querySelector("#form-input-name"),u=document.querySelector("#form-input-email"),m=document.querySelector("#form-textarea"),r=document.querySelector(`span[data-form=${u.id}`),f=document.querySelector(`span[data-form=${d.id}`),p=document.querySelector(`span[data-form=${m.id}`),i=document.querySelector(`span[data-form=${l.id}`);_.addEventListener("click",function(t){N()});O.addEventListener("click",function(t){T()});L.addEventListener("click",function(t){t.target===L&&T()});l.addEventListener("click",function(t){var e,a,o;t.preventDefault(),r.classList.remove("validate-active"),r.classList.remove("validate-active-success"),l.value="SENDING...",u.addEventListener("input",()=>{r.classList.remove("validate-active")}),d.addEventListener("input",()=>{f.classList.remove("validate-active")}),m.addEventListener("input",()=>{p.classList.remove("validate-active")});const s=E(u.value),v=h(d.value),c=h(m.value);if(s&&v&&c){const y=(a=(e=t.currentTarget)==null?void 0:e.dataset)==null?void 0:a.form;if(y){let n=(o=document.querySelector(`form[data-form=${y}]`))==null?void 0:o.dataset.jsForm;n=JSON.parse(n);try{n.method==="POST"||n.method==="GET"?x(n,y).then(S=>{l.value="SUBMIT",i.innerText="Данные отправлены",i.classList.add("validate-active-success"),setTimeout(()=>{i.classList.remove("validate-active-success"),d.value="",u.value="",m.value=""},1500)}).catch(S=>{i.innerText="Ошибка при отправке",i.classList.add("validate-active")}):(i.innerText="Ошибка при отправке",i.classList.add("validate-active"))}catch{i.innerText="Ошибка при отправке",i.classList.add("validate-active")}}}else s||(r.innerText="Неверно введённый email",r.classList.add("validate-active")),v||(f.innerText="Пустое имя",f.classList.add("validate-active")),c||(p.innerText="Пустое поле",p.classList.add("validate-active")),l.value="SUBMIT"});
